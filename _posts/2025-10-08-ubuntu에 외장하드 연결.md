---
layout: post
author: "betternormal"
tags: docker
title: "Ubuntu 서버에 외장하드 연결, 자동마운트하는 방법"
---

# 전체 개요
1️⃣ 외장하드 연결 후 인식 확인  
2️⃣ 파일시스템 종류(NTFS, exFAT, ext4 등) 확인  
3️⃣ 마운트(mount) — 실제 경로에 연결  
4️⃣ 영구 마운트(fstab 설정)  

⸻

# 1️⃣ 외장하드 인식 확인

먼저 하드를 USB로 꽂은 다음, 아래 명령으로 인식 상태를 봅니다:
```bash
lsblk

출력 예시:
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda      8:0    0 465.8G  0 disk 
├─sda1   8:1    0 465.8G  0 part /media/movies
sdb      8:16   0 931.5G  0 disk 
└─sdb1   8:17   0 931.5G  0 part 

여기서 새로 연결된 외장하드가 /dev/sdb1처럼 보입니다.
(보통 /dev/sda는 내부 디스크, /dev/sdb는 외장 하드예요.)

```


# 2️⃣ 파일시스템 종류 확인
```bash
sudo blkid /dev/sdb1

출력 예시:
/dev/sdb1: UUID="1234-ABCD" TYPE="exfat" PARTLABEL="MyDrive"
```
→ 여기서 TYPE에 따라 마운트 방법이 조금 달라집니다.  
ext4: 리눅스 전용, 권한 관리 가능  
ntfs: 윈도우용,	대부분 외장하드가 이거  
exfat: 윈도/맥 공용, 미디어용으로 자주 사용  

**exFAT 패키지 설치**
```bash
sudo apt update
sudo apt install exfat-fuse exfatprogs -y
```
Ubuntu 22.04 이후는 exfat-fuse와 exfatprogs 둘 다 필요합니다.

# 3️⃣ 임시 마운트 (테스트용)
```bash
예를 들어 /mnt/external 라는 폴더에 마운트하려면:

sudo mkdir -p /mnt/external
sudo mount /dev/sdb1 /mnt/external
```
이제 ls /mnt/external 로 파일이 보이면 성공

# 4️⃣ 부팅 시 자동 마운트 설정 (/etc/fstab)

매번 수동으로 마운트하기 번거로우니, 자동 마운트 설정을 추가합니다.

먼저 UUID 확인:
```bash
sudo blkid /dev/sdb1
```
출력에서 UUID를 복사합니다 (예: UUID=1234-ABCD).

그 다음 /etc/fstab 파일을 엽니다:
```bash
sudo nano /etc/fstab
```
그리고 맨 아래에 다음 줄 추가 👇

▪ exfat 외장하드의 예시
```bash
UUID=1234-ABCD /mnt/external exfat defaults,uid=1000,gid=1000,umask=0002 0 0
```
- uid=1000,gid=1000	기본 사용자에게 소유권 부여 (id 명령으로 확인 가능)
- umask=0002	그룹 쓰기 허용 (rw-rw-r–)
- defaults	기본 마운트 옵션
- 0 0	덤프/체크 비활성화
- 이렇게 하면 일반 사용자 및 Docker 컨테이너에서도 접근 가능해집니다.


파일 저장 후 테스트:
```bash
sudo mount -a
```
에러 없이 끝나면 성공입니다 🎉

# 5️⃣ 권한 설정 (Jellyfin, Docker 등에서 접근하려면)
```
sudo chown -R $USER:$USER /mnt/external
sudo chmod -R 755 /mnt/external
```

# ✅ 정리 요약  
1. exFAT 지원 패키지 설치: sudo apt install exfat-fuse exfatprogs -y  
2. 디스크 확인	lsblk, sudo blkid  
3. 마운트 폴더 생성	sudo mkdir -p /mnt/external  
4. 수동 마운트	sudo mount /dev/sdb1 /mnt/external  
5. 자동 마운트 등록	/etc/fstab 에 UUID 추가  
6. 권한 조정	sudo chown -R $USER:$USER /mnt/external  
7. 마운트 해제
    - ① 마운트 경로로 지정: 
sudo umount /mnt/external
    - ② 장치 이름으로 지정: 
sudo umount /dev/sdb1